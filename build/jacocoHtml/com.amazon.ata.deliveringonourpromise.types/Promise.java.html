<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Promise.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">DeliveringOnOurPromise</a> &gt; <a href="index.source.html" class="el_package">com.amazon.ata.deliveringonourpromise.types</a> &gt; <span class="el_source">Promise.java</span></div><h1>Promise.java</h1><pre class="source lang-java linenums">package com.amazon.ata.deliveringonourpromise.types;

import java.time.ZonedDateTime;

/**
 * Represents a customer promise, regardless of which service/stage of the order process
 * the promise was made.
 * &lt;p&gt;
 * Use the Builder pattern to populate a Promise object:
 *
 * &lt;pre&gt;{@code
 *   Promise promise = Promise.builder()
 *                            .withCustomerOrderItemId(orderItemId)
 *                            .withAsin(asin)
 *                            ...
 *                            .withPromiseProvidedBy(&quot;OFS&quot;)
 *                            .build();
 * }&lt;/pre&gt;
 * &lt;p&gt;
 * Explanation of fields:
 * * customerOrderItemId: the ID of the item in the customer's order that this Promise is relevant for
 * * asin: the ASIN that the order item includes
 * * isActive: boolean indicating whether the promise is currently relevant (true)
 * or superseded by another promise (false)
 * * promiseEffectiveDate: the timestamp that the promise became the relevant/active promise
 * * promiseLatestArrivalDate: timestamp of the latest time item can be delivered and still meet promise made
 * to customer
 * * promiseLatestShipDate: timestamp of latest time item can be shipped and meet customer promise
 * * deliveryDate: timestamp of when the item was delivered (or null if it hasn't been delivered yet)
 * * promiseProvidedBy: where the promise came from (which service)
 */
public class Promise {
    private String customerOrderItemId;
    private String asin;
    private boolean active;
    private ZonedDateTime promiseEffectiveDate;
    private ZonedDateTime promiseLatestArrivalDate;
    private ZonedDateTime promiseLatestShipDate;
    private ZonedDateTime deliveryDate;
    private String promiseProvidedBy;
    private int confidence;

    private Promise() {
    }

    /**
     * Creates a new builder for populating a Promise.
     *
     * @return new builder ready to build.
     */
    public static Builder builder() {
<span class="fc" id="L52">        return new Builder();</span>
    }

    public ZonedDateTime getPromiseLatestArrivalDate() {
<span class="fc" id="L56">        return promiseLatestArrivalDate;</span>
    }

    public String getCustomerOrderItemId() {
<span class="fc" id="L60">        return customerOrderItemId;</span>
    }

    public ZonedDateTime getPromiseEffectiveDate() {
<span class="fc" id="L64">        return promiseEffectiveDate;</span>
    }

    public boolean isActive() {
<span class="fc" id="L68">        return active;</span>
    }

    public ZonedDateTime getPromiseLatestShipDate() {
<span class="fc" id="L72">        return promiseLatestShipDate;</span>
    }

    public ZonedDateTime getDeliveryDate() {
<span class="fc" id="L76">        return deliveryDate;</span>
    }

    /**
     * Sets the delivery date associated with the order item ID this promise corresponds to. Allow
     * setting it after build/instantiation to allow centralization of logic across promise providers.
     *
     * @param deliveryDate the ZonedDateTime containing the delivery date for the shipment containing the order ID
     */
    public void setDeliveryDate(ZonedDateTime deliveryDate) {
<span class="fc" id="L86">        this.deliveryDate = deliveryDate;</span>
<span class="fc" id="L87">    }</span>

    public String getPromiseProvidedBy() {
<span class="fc" id="L90">        return promiseProvidedBy;</span>
    }

    public String getAsin() {
<span class="fc" id="L94">        return asin;</span>
    }

    public int getConfidence() {
<span class="fc" id="L98">        return confidence;</span>
    }

    /**
     * Sets the confidence value associated with the item ID this promise corresponds to. Allow setting
     * it after build/instantiation to allow centralization of logic across promise providers, and to
     * accommodate tracking determination.
     *
     * @param isConfidenceTracked Whether this item is one of the items tracked by Global Transportation.
     * @param trackedConfidence   The confidence in promises related to this item, if tracked; otherwise a random
     *                            integer that should be ignored.
     */
    public void setConfidence(boolean isConfidenceTracked, int trackedConfidence) {
<span class="fc" id="L111">        this.confidence = trackedConfidence;</span>
<span class="fc" id="L112">    }</span>

    @Override
    public String toString() {
<span class="fc" id="L116">        return &quot;Promise{&quot; +</span>
                &quot;customerOrderItemId='&quot; + customerOrderItemId + '\'' +
                &quot;, asin='&quot; + asin + '\'' +
                &quot;, isActive=&quot; + active +
                &quot;, promiseEffectiveDate=&quot; + promiseEffectiveDate +
                &quot;, promiseLatestArrivalDate=&quot; + promiseLatestArrivalDate +
                &quot;, promiseLatestShipDate=&quot; + promiseLatestShipDate +
                &quot;, deliveryDate=&quot; + deliveryDate +
                &quot;, promiseProvidedBy='&quot; + promiseProvidedBy + '\'' +
                '}';
    }

    /**
     * Builder for Promises. See Promise documentation.
     */
<span class="fc" id="L131">    public static class Builder {</span>
        private String customerOrderItemId;
        private String asin;
        private boolean active;
        private ZonedDateTime promiseEffectiveDate;
        private ZonedDateTime promiseLatestArrivalDate;
        private ZonedDateTime promiseLatestShipDate;
        private ZonedDateTime deliveryDate;
        private String promiseProvidedBy;

        //CHECKSTYLE:OFF:HiddenField
        //CHECKSTYLE:OFF:JavadocMethod
        public Builder withCustomerOrderItemId(String customerOrderItemId) {
<span class="fc" id="L144">            this.customerOrderItemId = customerOrderItemId;</span>
<span class="fc" id="L145">            return this;</span>
        }

        public Builder withAsin(String asin) {
<span class="fc" id="L149">            this.asin = asin;</span>
<span class="fc" id="L150">            return this;</span>
        }

        public Builder withIsActive(boolean active) {
<span class="fc" id="L154">            this.active = active;</span>
<span class="fc" id="L155">            return this;</span>
        }

        public Builder withPromiseEffectiveDate(ZonedDateTime promiseEffectiveDate) {
<span class="fc" id="L159">            this.promiseEffectiveDate = promiseEffectiveDate;</span>
<span class="fc" id="L160">            return this;</span>
        }

        public Builder withPromiseLatestArrivalDate(ZonedDateTime promiseLatestArrivalDate) {
<span class="fc" id="L164">            this.promiseLatestArrivalDate = promiseLatestArrivalDate;</span>
<span class="fc" id="L165">            return this;</span>
        }

        public Builder withPromiseLatestShipDate(ZonedDateTime promiseLatestShipDate) {
<span class="fc" id="L169">            this.promiseLatestShipDate = promiseLatestShipDate;</span>
<span class="fc" id="L170">            return this;</span>
        }

        public Builder withDeliveryDate(ZonedDateTime deliveryDate) {
<span class="fc" id="L174">            this.deliveryDate = deliveryDate;</span>
<span class="fc" id="L175">            return this;</span>
        }

        public Builder withPromiseProvidedBy(String promiseProvidedBy) {
<span class="fc" id="L179">            this.promiseProvidedBy = promiseProvidedBy;</span>
<span class="fc" id="L180">            return this;</span>
        }
        //CHECKSTYLE:ON:JavadocMethod
        //CHECKSTYLE:ON:HiddenField

        /**
         * build the Promise from the provided data.
         *
         * @return the populated Promise
         */
        public Promise build() {
<span class="fc" id="L191">            Promise promise = new Promise();</span>
<span class="fc" id="L192">            promise.customerOrderItemId = customerOrderItemId;</span>
<span class="fc" id="L193">            promise.asin = asin;</span>
<span class="fc" id="L194">            promise.active = active;</span>
<span class="fc" id="L195">            promise.promiseEffectiveDate = promiseEffectiveDate;</span>
<span class="fc" id="L196">            promise.promiseLatestArrivalDate = promiseLatestArrivalDate;</span>
<span class="fc" id="L197">            promise.promiseLatestShipDate = promiseLatestShipDate;</span>
<span class="fc" id="L198">            promise.deliveryDate = deliveryDate;</span>
<span class="fc" id="L199">            promise.promiseProvidedBy = promiseProvidedBy;</span>

<span class="fc" id="L201">            return promise;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>